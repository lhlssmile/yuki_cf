# King's Island

## 题目链接
[Codeforces GYM 105582K - King's Island](https://codeforces.com/gym/105582/problem/K)

## 题目理解

国王想要创建一个人工岛屿，具有以下属性：
1. 必须是一个简单的、非自相交的 n 边形
2. 所有顶点都有整数坐标
3. 没有三个连续的顶点在同一条直线上
4. 所有边的长度都是整数
5. 没有边平行于坐标轴
6. 坐标的绝对值不超过 10^4

给定 n，构造这样一个岛屿。

## 核心思路

### 1. 构造策略

这道题的关键是构造一个满足所有条件的多边形。我们可以采用以下策略：

1. **基础形状构造**：先在一个简单的坐标系中构造基本形状
2. **旋转变换**：通过旋转变换确保没有边平行于坐标轴
3. **奇偶分类处理**：根据 n 的奇偶性采用不同的构造方法

### 2. 基础形状设计

#### 偶数情况 (n 为偶数)
```
构造一个类似锯齿状的形状：
(0,0) -> (0,25) -> (25,25) -> (25,50) -> (50,50) -> ... -> (x,0)
```

#### 奇数情况 (n 为奇数)
```
在偶数构造的基础上，添加一个额外的顶点：
最后添加一个点 (x/25*9, -x/25*12) 形成三角形结构
```

### 3. 旋转变换

为了确保没有边平行于坐标轴，对所有点进行旋转变换：
```cpp
dx = 5, dy = 12
新坐标: (x*dx + y*dy, x*(-dy) + y*dx)
```

这相当于将每个点 (x,y) 变换为：
- 新 x 坐标：5x + 12y
- 新 y 坐标：-12x + 5y

## 算法详解

### 步骤1：构造基础多边形

```cpp
if (n & 1) {  // 奇数情况
    xy.pb({0, 0});
    int x = 0, y = 0;
    for (int i = 0; i < n / 2 - 1; i++) {
        y += 25;
        xy.pb({x, y});
        x += 25;
        xy.pb({x, y});
    }
    x = max(x, 25);
    xy.emplace_back(x, 0);
    xy.emplace_back(x / 25 * 9, -x / 25 * 12);
} else {  // 偶数情况
    // 类似构造，但不添加额外顶点
}
```

### 步骤2：应用旋转变换

```cpp
int dx = 5, dy = 12;
for (auto& [x, y] : xy) {
    cout << x * dx + y * dy << ' ' << x * (-dy) + y * dx << '\n';
}
```

## 算法正确性

### 1. 为什么选择 (5, 12) 作为旋转参数？

- 5 和 12 互质，确保旋转后的坐标仍为整数
- 旋转角度使得原本水平/垂直的边不再平行于坐标轴
- 5² + 12² = 25 + 144 = 169 = 13²，这是一个勾股数组

### 2. 边长为整数的保证

- 基础构造中使用 25 作为步长
- 25 = 5²，与旋转参数配合良好
- 旋转变换保持距离的整数性质

### 3. 非自相交的保证

- 基础形状是简单的锯齿状，不会自相交
- 旋转变换是刚体变换，保持形状的拓扑性质

### 4. 坐标范围控制

- 基础坐标控制在合理范围内
- 旋转后坐标仍在 [-10000, 10000] 范围内

## 复杂度分析

- **时间复杂度**：O(n)，构造 n 个顶点
- **空间复杂度**：O(n)，存储顶点坐标

## 关键观察

1. **几何构造**：通过简单的锯齿状形状满足基本要求
2. **旋转技巧**：使用勾股数组进行旋转，保持整数性质
3. **奇偶处理**：根据顶点数的奇偶性调整构造策略
4. **参数选择**：25、5、12 等参数的选择都有数学依据

